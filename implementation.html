<!DOCTYPE html>

<html>

<head>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="http://cdn.jsdelivr.net/jquery.scrollto/2.1.2/jquery.scrollTo.min.js"></script>

</head>
<body>
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Team 21</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Introduction<span class="sr-only">(current)</span></a></li>
            <li class="active"><a href="implementation.html">Implementation</a></li>
            <li><a href="results.html">Results and Conclusion</a></li>
            <li><a href="team.html">The Team</a></li>
            <li><a href="extras.html">Extras</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>
    <div class="content">
        <div class='info col-md-12' name='eye'>
            <h2>The Eye</h2>
            <div class="col-md-6">
                <p>Using Baxter's hand cameras, we obtain a raw image of the board and its surroundings.  It is the Eye node's job to find the chess board and map it to a 2D representation for the brain to analyze.  The Eye accomplishes this task by [Alex's Stuff Here]</p>
            </div>   
            <div class="col-md-6">
                <p>[Picture Here]</p>
            </div>   
        </div>
        <div class='info col-md-12' name='brain'>
            <h2>The Brain</h2>
            <div class="col-md-12">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQfbBZlvd9rB2EtRjC4ThtzRGMSwJCLNNec-rgjcpTrDrWcoVlydTSaG8s"
                <p>After receiving image and coordinate information from the Eye, the Brain must update its internal state, communicate with its chess engine, and then send movement coordinates to the Arm. </p>
                <p>The first step in this process is updating the Brain's internal state.  Using its previous board state and the chess engine API, the Brain generates all possible next board states.  Afterwards, it takes the 2D board image and use that as evidence in order to infer the next board state.  In order to figure out what the board is, we take our 2D images and split it into individual squares in order from top left to bottom right.  We then featurize these squares using a <a href="https://en.wikipedia.org/wiki/Histogram_of_oriented_gradients"><b>Histogram of Oriented Gradients</b></a> and the send these feature vectors to a <a href=""><b>Random Decision Forest</b></a> that has been trained to recognize empty squares and piece colors.  For each square, we get a probability distribution of the possible states: empty, contains a white piece, and contains a black piece.  From there, we take each possible board and weight each board using the log sum of the probability of the board given our image.  We then choose the board with the greatest weight as our board state</p>
                <p>Once the Brain figures out what board state it is in, it can then send this board to the chess engine and query a next move.  When the engine returns a move in UCI notation (i.e 'e1g1'), the brain then uses the coordinates sent from the Eye to map the squares in the move to world frame coordinates.  Also returned from the engine is whether of not the move was a 'capture' and we handle that by passing that message onwards to the Arm.  We then wrap these coordinates in a <em><b>MoveMessage (?)</b></em> and then publish that message to the <em><b>Which topic??</b></em> </p>
                <p>The python packages used in this module are: <b>Sklearn, Skimage, and python-chess</b>.</p>
                    [Logos of each package]
            </div>   
        </div>
        <div class='info col-md-12' name='arm'>
            <h2>The Arm</h2>
        </div>
    </div>

<!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script type="text/javascript" src='js/nav.js'></script>
</body>
</html>